### US-004 ツイート一括登録 フローチャート

```mermaid
graph TD
    A[START: コンテンツ管理者が管理画面から<br>スプレッドシートファイルをアップロード] --> B;
    B[システムがファイルを受信し、内容を読み込む] --> C;
    C{ファイル内の各行をループ処理} --> D{必須項目は存在するか？<br>(本文, 登録日時)};
    D -- Yes --> E{文字数チェックはOKか？<br>(URLは23文字として計算)};
    D -- No --> H[エラーとして記録し、<br>この行の処理をスキップ];
    
    E -- Yes --> F{登録日時のフォーマットは正しいか？};
    E -- No --> H;
    
    F -- Yes --> G[投稿キュー（スプレッドシート）に<br>新しい登録ツイートとして登録];
    F -- No --> H;

    G --> I{次の行は存在するか？};
    H --> I;

    I -- Yes --> C;
    I -- No --> J[END: 全行の処理完了];
```

### フローチャートの解説

1.  **START: ファイルアップロード**

      * コンテンツ管理者が、Webブラウザ上の管理画面から、事前に作成したツイートリスト（スプレッドシートまたはCSVファイル）を選択し、アップロードします。

2.  **ファイル読み込みとループ処理**

      * システムはアップロードされたファイルを受け取り、その内容を一行ずつ読み込み、ループ処理を開始します。

3.  **バリデーション（検証）処理**

      * ループ内の各行（各ツイート）に対して、以下のバリデーションを順次行います。
      * **必須項目チェック**: ツイート本文や投稿登録日時など、必須のデータが欠けていないかを確認します。
      * **文字数チェック**: ツイート本文の文字数を検証します。この際、本文中に含まれるURLは、Twitterの仕様に従い、一律で23文字として計算されます。
      * **日時フォーマットチェック**: 投稿登録日時の形式が、システムで定められた正しいフォーマットになっているかを確認します。
      * **バリデーション失敗**: いずれかのチェックで問題が見つかった場合、その行は登録せず、エラーとして記録した上で処理をスキップし、次の行へ進みます。

4.  **投稿キュー（スプレッドシート）への登録**

      * 全てのバリデーションを通過したツイートは、投稿キュー（スプレッドシート）に新しい行として追加され、登録が完了します。

5.  **END: 処理完了**

      * アップロードされたファイルの全ての行に対する処理が終わると、一括登録のフローは終了します。